<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>학생용 MBTI 설문</title>
  <link rel="icon" type="image/svg+xml" href="assets/cross_favicon.svg" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 40px;
    }

    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .question {
      font-size: 20px;
      margin-bottom: 20px;
    }

    .scale-buttons button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      transition: background 0.18s, color 0.18s, border 0.18s, transform 0.13s;
    }

    .scale-buttons button.selected {
      background-color: #fff;
      color: #d32f2f;
      border: 2.5px solid #d32f2f;
      font-weight: bold;
      transform: scale(1.07);
    }

    .scale-buttons button:hover {
      background-color: #45a049;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>학생용 성경적 MBTI 설문</h1>
    <div class="question" id="question-box">질문을 불러오는 중입니다...</div>
    <div class="scale-buttons"></div>
    <div class="nav-buttons" style="margin-top:20px; display:flex; justify-content:space-between;">
      <button id="prev-btn" style="visibility:hidden;">이전</button>
      <button id="next-btn">다음</button>
    </div>
  </div>

  <script type="module">
    // SWOT 분석 데이터 불러오기
    import { swotAnalysis } from './data/swotAnalysis.js';

    const questions = [
      "친구들과 함께 공부하거나 놀 때 에너지가 넘쳐요.",
      "혼자서 조용히 책을 읽거나 생각하는 시간이 좋아요.",
      "새로운 친구를 만나는 것이 학교생활에 도움이 된다고 생각해요.",
      "혼자만의 시간을 통해 나를 더 잘 이해하려 노력해요.",
      "가족들과 함께 식사하며 대화하는 시간이 소중해요.",
      "친구들과 함께 놀이터나 공원에서 놀 때가 즐거워요.",
      "일상에서 작은 것들을 잘 관찰하고 기록하는 편이에요.",
      "미래에 대한 꿈과 가능성을 자주 상상해요.",
      "작은 일에도 최선을 다하는 것이 중요하다고 생각해요.",
      "깊이 생각하고 이해하는 것이 중요하다고 생각해요.",
      "학습 계획을 세우고 그대로 실천하는 편이에요.",
      "계획보다는 상황에 맞게 유연하게 대처하는 편이에요.",
      "공부나 일에서 옳고 그름을 분명히 알고 싶어요.",
      "친구들의 마음을 이해하고 배려하는 것이 중요하다고 생각해요.",
      "학습 목표를 세우고 그대로 실천하는 편이에요.",
      "상황에 따라 계획을 유연하게 조정하는 편이에요."
    ];

    const scaleLabels = ["전혀 아니에요", "아니에요", "보통이에요", "그렇네요", "정말 그래요"];

    let current = 0;
    const answers = [];

    function loadQuestion() {
      // 모든 질문에 대한 답변이 있는지 확인
      if (current >= questions.length) {
        // 모든 질문에 대한 답변이 있는지 확인
        if (answers.length !== questions.length) {
          alert('모든 질문에 답변해 주세요!');
          return;
        }
        
        // 기존 데이터 초기화
        localStorage.removeItem('adultScores');
        localStorage.removeItem('isStudent');
        
        // 점수 저장
        localStorage.setItem('studentScores', JSON.stringify(answers));
        localStorage.setItem('isStudent', 'true');
        window.location.href = 'result.html';
        return;
      }
      document.getElementById("question-box").textContent = `Q${current + 1}. ${questions[current]}`;
      document.getElementById('prev-btn').style.visibility = current === 0 ? 'hidden' : 'visible';
      document.getElementById('next-btn').textContent = current === questions.length - 1 ? '제출' : '다음';
      const scaleBtns = document.querySelectorAll('.scale-buttons button');
      scaleBtns.forEach((btn, idx) => {
        if (answers[current] === idx + 1) {
          btn.classList.add('selected');
        } else {
          btn.classList.remove('selected');
        }
      });
    }

    function submitAnswer(score) {
      answers[current] = score;
      loadQuestion();
    }

    document.getElementById('prev-btn').onclick = function () {
      if (current > 0) {
        current--;
        loadQuestion();
      }
    };
    document.getElementById('next-btn').onclick = function () {
      if (answers[current]) {
        current++;
        loadQuestion();
      } else {
        alert('선택지를 먼저 선택해 주세요.');
      }
    };

    function renderScaleButtons() {
      const scaleDiv = document.querySelector('.scale-buttons');
      scaleDiv.innerHTML = '';
      scaleLabels.forEach((label, idx) => {
        const btn = document.createElement('button');
        btn.textContent = label;
        btn.onclick = function () { submitAnswer(idx + 1); };
        if (answers[current] === idx + 1) {
          btn.classList.add('selected');
        }
        scaleDiv.appendChild(btn);
      });
    }
    renderScaleButtons();
    loadQuestion();
  </script>
</body>

</html>
