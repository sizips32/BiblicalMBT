<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>성인용 MBTI 설문</title>
  <link rel="icon" type="image/png" href="assets/cross_bible_icon.png" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f8ff;
      text-align: center;
      padding: 40px;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .question {
      font-size: 20px;
      margin-bottom: 20px;
    }
    .scale-buttons button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      transition: background 0.18s, color 0.18s, border 0.18s, transform 0.13s;
    }
    .scale-buttons button.selected {
      background-color: #fff;
      color: #d32f2f;
      border: 2.5px solid #d32f2f;
      font-weight: bold;
      transform: scale(1.07);
    }
    .scale-buttons button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>성인용 성경적 MBTI 설문</h1>
    <div class="question" id="question-box">질문을 불러오는 중입니다...</div>
    <div class="scale-buttons"></div>
    <div class="nav-buttons" style="margin-top:20px; display:flex; justify-content:space-between;">
      <button id="prev-btn" style="visibility:hidden;">이전</button>
      <button id="next-btn">다음</button>
    </div>
  </div>

  <script>
    const questions = [
      "나는 여러 사람과 함께 신앙 활동을 할 때 에너지가 충전된다.",
      "조용한 환경에서 깊이 묵상하며 하나님과 교제하는 시간이 나에게 중요하다.",
      "새로운 사람을 만나는 것이 신앙 성장에 도움이 된다고 느낀다.",
      "혼자만의 시간을 통해 내 믿음을 점검하고 성장한다.",
      "복음을 전할 때 자연스럽고 적극적으로 나서게 된다.",
      "개인적으로 하나님께 기도하고 말씀을 묵상하는 시간이 꼭 필요하다.",
      "현재 내게 주어진 일상 속에서 하나님의 뜻을 찾으려고 노력한다.",
      "미래에 대한 하나님의 비전과 인도하심을 자주 상상한다.",
      "작은 일에도 신실하게 임하는 것이 신앙인의 자세라고 생각한다.",
      "상상력과 영적 통찰을 통해 하나님의 뜻을 더 깊이 이해하려 한다.",
      "실행 가능한 계획을 세워 신앙을 실천하는 편이다.",
      "계획보다는 성령의 인도하심에 따라 즉흥적으로 움직일 때가 많다.",
      "신앙생활에서 옳고 그름을 분명하게 구분하려 한다.",
      "사람들의 감정과 상황에 공감하며 배려하는 것이 중요하다.",
      "성경 말씀을 기준 삼아 이성적으로 판단하려 한다.",
      "다른 이의 아픔에 함께 공감하고 위로하려 노력한다.",
      "진리와 원칙을 지키기 위해 단호하게 행동할 수 있다.",
      "사람들의 약점을 감싸 안고 이해하려 한다.",
      "계획을 세우고 그에 따라 꾸준히 실천하는 것을 선호한다.",
      "계획이 바뀌더라도 유연하게 받아들이고 순종한다.",
      "예배나 봉사에서 정해진 순서와 규칙을 중요하게 생각한다.",
      "하나님의 뜻에 민감하게 반응하며 새로운 시도에 열려 있다.",
      "주어진 일을 끝까지 책임감 있게 완수하려 한다.",
      "계획보다 하나님께서 주시는 기회에 믿음으로 순종하는 편이다."
    ];

    const scaleLabels = ["매우 아니다", "아니다", "보통이다", "그렇다", "매우 그렇다"];

    let current = 0;
    const answers = [];

    function loadQuestion() {
      // 모든 질문에 대한 답변이 있는지 확인
      if (current >= questions.length) {
        // 모든 질문에 대한 답변이 있는지 확인
        if (answers.length !== questions.length) {
          alert('모든 질문에 답변해 주세요!');
          return;
        }
        
        // 기존 데이터 초기화
        localStorage.removeItem('studentScores');
        localStorage.removeItem('isStudent');
        
        // 점수 저장
        localStorage.setItem('adultScores', JSON.stringify(answers));
        localStorage.setItem('isStudent', 'false');
        window.location.href = 'result.html';
        return;
      }
      document.getElementById("question-box").textContent = `Q${current + 1}. ${questions[current]}`;
      document.getElementById('prev-btn').style.visibility = current === 0 ? 'hidden' : 'visible';
      document.getElementById('next-btn').textContent = current === questions.length - 1 ? '제출' : '다음';
      const scaleBtns = document.querySelectorAll('.scale-buttons button');
      scaleBtns.forEach((btn, idx) => {
        if (answers[current] === idx + 1) {
          btn.classList.add('selected');
        } else {
          btn.classList.remove('selected');
        }
      });
    }

    function submitAnswer(score) {
      answers[current] = score;
      loadQuestion();
    }

    document.getElementById('prev-btn').onclick = function() {
      if (current > 0) {
        current--;
        loadQuestion();
      }
    };
    document.getElementById('next-btn').onclick = function() {
      if (answers[current]) {
        current++;
        loadQuestion();
      } else {
        alert('선택지를 먼저 선택해 주세요.');
      }
    };

    function renderScaleButtons() {
      const scaleDiv = document.querySelector('.scale-buttons');
      scaleDiv.innerHTML = '';
      scaleLabels.forEach((label, idx) => {
        const btn = document.createElement('button');
        btn.textContent = label;
        btn.onclick = function() { submitAnswer(idx + 1); };
        if (answers[current] === idx + 1) {
          btn.classList.add('selected');
        }
        scaleDiv.appendChild(btn);
      });
    }
    renderScaleButtons();
    loadQuestion();
  </script>
</body>
</html>
